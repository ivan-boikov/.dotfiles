#!/bin/sh

pkgs_to_lock="llvm gcc clang"
tmpfile="$(mktemp)"
pinfile="/etc/portage/package.mask/pins"

for pkg in $pkgs_to_lock; do
   echo ">$(qlist -CIve "$pkg")" >> "$tmpfile"
done

echo "Package mask:"
cat "$tmpfile"

echo "Commiting mask to $pinfile, need root privileges"
sudo -A cp -v "$tmpfile" "$pinfile"
sudo -A chmod 644 "$pinfile"

rm -v "$tmpfile"
