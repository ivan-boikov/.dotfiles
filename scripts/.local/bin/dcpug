#!/bin/sh

dmenu="$(command -v cdmenu)"
if [ -z "$dmenu" ]; then
    dmenu="dmenu"
fi

profiles="$(sed 's/ /\\n/g' /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors)"

profile=$(printf '%s' "$profiles" | $dmenu)

notify-send "Set CPU profile: $profile"
sudo -A cpupower frequency-set --governor "$profile"
# repeat, for good measure
sudo -A cpupower frequency-set --governor "$profile"
